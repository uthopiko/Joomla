function cValidate(){this.message="";this.REM="info is required. Make sure it contains a valid value!";this.noticeTitle="Notice";this.errorField=new Array;this.customMessage="";this.JOINTEXT=",";this.init=function(){joms.jQuery("#community-wrap form.community-form-validate :input.required").blur(function(){if(!joms.jQuery(this).hasClass("validate-custom-date")&&!joms.jQuery(this).hasClass("validate-country")){if(cvalidate.validateElement(this))cvalidate.markValid(this);else cvalidate.markInvalid(this)}});joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-email").blur(function(){if(joms.jQuery.trim(joms.jQuery(this).val())!=""){if(cvalidate.validateElement(this))cvalidate.markValid(this);else cvalidate.markInvalid(this)}});joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-url").blur(function(){if(joms.jQuery.trim(joms.jQuery(this).val())!=""){if(cvalidate.validateElement(this))cvalidate.markValid(this);else cvalidate.markInvalid(this)}});joms.jQuery("#community-wrap form.community-form-validate :input.validate-country").change(function(){if(joms.jQuery(this).hasClass("required")){if(cvalidate.validateElement(this))cvalidate.markValid(this);else cvalidate.markInvalid(this)}});joms.jQuery("#community-wrap form.community-form-validate :input.validate-custom-date").blur(function(){if(cvalidate.validateElement(this))cvalidate.markValid(this);else cvalidate.markInvalid(this)});joms.jQuery("#community-wrap form.community-form-validate :input.validateSubmit").click(function(){if(cvalidate.validateForm()){return true}else{var e=cvalidate.REM=="undefined"||cvalidate.REM==""?"info is required. Make sure it contains a valid value!":cvalidate.REM;if(cvalidate.errorField.length>1){lastField=cvalidate.errorField.pop();var t=cvalidate.JOINTEXT=="undefined"||cvalidate.JOINTEXT==""?" and ":cvalidate.JOINTEXT;strErrField=cvalidate.errorField.join(", ")+" "+t+" "+lastField}else{strErrField=cvalidate.errorField}e=strErrField+" "+e;if(cvalidate.customMessage!=""){e=cvalidate.customMessage}if(joms.jQuery("#tnc").hasClass("required")){if(cvalidate.errorField.length<1){var n=joms.jQuery("#tnc:checked").val();var e=joms.jQuery("#tnc").data("message");e=n!="Y"?e:cvalidate.REM}}e=e.replace(/\n/g,"");cWindowShow("joms.jQuery('#cWindowContent').html(\""+e+'")',cvalidate.noticeTitle,450,70,"warning");joms.jQuery("#community-wrap form.community-form-validate :input.required[value='']").each(function(e){cvalidate.markInvalid(this)});return false}})};this.setMaxLength=function(e,t){joms.jQuery(e).keyup(function(){var e=parseInt(t);if(joms.jQuery(this).val().length>e){joms.jQuery(this).val(joms.jQuery(this).val().substr(0,t))}})};this.markInvalid=function(e){var t=e.name;if(joms.jQuery(e).hasClass("validate-custom-date")){joms.jQuery("#community-wrap form.community-form-validate input[name='"+t+"']").addClass("invalid");joms.jQuery("#community-wrap form.community-form-validate select[name='"+t+"']").addClass("invalid")}else{joms.jQuery(e).addClass("invalid")}};this.markValid=function(e){var t=e.name;if(joms.jQuery(e).hasClass("validate-custom-date")){joms.jQuery("#community-wrap form.community-form-validate input[name='"+t+"']").removeClass("invalid");joms.jQuery("#community-wrap form.community-form-validate select[name='"+t+"']").removeClass("invalid")}else{joms.jQuery(e).removeClass("invalid")}if(t!=null){t=t.replace("[]","");joms.jQuery("#err"+t+"msg").hide();joms.jQuery("#err"+t+"msg").html("&nbsp")}};this.validateElement=function(e){var t=true;var n=e.name;if(joms.jQuery(e).attr("type")=="text"||joms.jQuery(e).attr("type")=="password"||joms.jQuery(e).attr("type")=="textarea"){if(joms.jQuery.trim(joms.jQuery(e).val())==""){if(joms.jQuery(e).hasClass("required")){t=false;n=n.replace("[]","");lblName=joms.jQuery("#lbl"+n).html();if(lblName==null){lblName="Field"}else{lblName=lblName.replace("*","")}this.setMessage(n,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE")}}else{if(joms.jQuery(e).hasClass("validate-name")){if(joms.jQuery(e).val().length<3){this.setMessage(n,"","COM_COMMUNITY_NAME_TOO_SHORT");t=false}else{joms.jQuery("#err"+n+"msg").hide();joms.jQuery("#err"+n+"msg").html("&nbsp");t=true}}if(joms.jQuery(e).hasClass("validate-username")){if(joms.jQuery("#usernamepass").val()!=joms.jQuery(e).val()){t=cvalidate.ajaxValidateUserName(joms.jQuery(e))}}if(joms.jQuery(e).hasClass("validate-email")){regex=/^([*+!.&#$¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,4})$/i;t=regex.test(joms.jQuery(e).val());if(t==false){this.setMessage(n,"","COM_COMMUNITY_INVALID_EMAIL")}else{joms.jQuery("#err"+n+"msg").hide();joms.jQuery("#err"+n+"msg").html("&nbsp");if(joms.jQuery("#emailpass").val()!=joms.jQuery(e).val()){t=cvalidate.ajaxValidateEmail(joms.jQuery(e))}}}if(joms.jQuery(e).hasClass("validate-profile-email")){regex=/^([*+!.&#$¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,6})$/i;t=regex.test(joms.jQuery(e).val());if(t==false){this.setMessage(n,"","COM_COMMUNITY_INVALID_EMAIL")}else{joms.jQuery("#err"+n+"msg").hide();joms.jQuery("#err"+n+"msg").html("&nbsp")}}if(joms.jQuery(e).hasClass("validate-profile-url")){var r=joms.jQuery(e).val();if(r.match("http://")){r=r.replace("http://","");joms.jQuery(e).prev("select").find("option").removeAttr("selected").filter('[value="http://"]').attr("selected","selected")}if(r.match("https://")){r=r.replace("https://","");joms.jQuery(e).prev("select").find("option").removeAttr("selected").filter('[value="https://"]').attr("selected","selected")}joms.jQuery(e).val(r);n=n.replace("[]","");regex=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/;t=regex.test(joms.jQuery(e).val());if(t==false){this.setMessage(n,"","COM_COMMUNITY_INVALID_URL")}else{joms.jQuery("#err"+n+"msg").hide();joms.jQuery("#err"+n+"msg").html("&nbsp")}}if(joms.jQuery(e).hasClass("validate-password")&&e.name=="jspassword"){if(joms.jQuery(e).val().length<6){this.setMessage(n,"","COM_COMMUNITY_PASSWORD_TOO_SHORT");t=false}else{joms.jQuery("#err"+n+"msg").hide();joms.jQuery("#err"+n+"msg").html("&nbsp");t=true}}if(joms.jQuery(e).hasClass("validate-passverify")&&e.name=="jspassword2"){t=joms.jQuery("#jspassword").val()==joms.jQuery(e).val();if(t==false){this.setMessage("jspassword2","","COM_COMMUNITY_PASSWORD_NOT_SAME")}else{joms.jQuery("#errjspassword2msg").hide();joms.jQuery("#errjspassword2msg").html("&nbsp")}}if(joms.jQuery(e).hasClass("validate-custom-date")){t=this.checkCustomDate(e)}}}else if(joms.jQuery(e).attr("type")=="checkbox"){if(joms.jQuery(e).hasClass("validate-custom-checkbox")){if(joms.jQuery("#community-wrap form.community-form-validate input[name='"+n+"']:checked").size()==0){t=false}if(t==false){n=n.replace("[]","");lblName=joms.jQuery("#lbl"+n).html();if(lblName==null){lblName="Field"}else{lblName=lblName.replace("*","")}this.setMessage(n,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE")}}else{if(!joms.jQuery(e).attr("checked"))t=false}}else if(joms.jQuery(e).attr("type")=="radio"){if(joms.jQuery(e).hasClass("validate-custom-radio")){if(joms.jQuery("#community-wrap form.community-form-validate input[name='"+n+"']:checked").size()==0){t=false}if(t==false){lblName=joms.jQuery("#lbl"+n).html();if(lblName==null){lblName="Field"}else{lblName=lblName.replace("*","")}this.setMessage(n,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE")}}else{if(!joms.jQuery(e).attr("checked"))t=false}}else if(joms.jQuery(e).is("select")){if(joms.jQuery(e).children(":selected").length==0){t=false}else{joms.jQuery(e).children(":selected").each(function(){if(joms.jQuery(e).val()=="")t=false})}if(joms.jQuery(e).hasClass("validate-country")){if(joms.jQuery(e).val()=="selectcountry")t=false}if(joms.jQuery(e).hasClass("validate-custom-date")){t=this.checkCustomDate(e)}else if(t==false){n=n.replace("[]","");lblName=joms.jQuery("#lbl"+n).html();if(lblName==null){lblName="Field"}else{lblName=lblName.replace("*","")}this.setMessage(n,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE")}}else if(joms.jQuery(e).attr("type")=="select-multiple"){if(joms.jQuery(e).children(":selected").length==0)t=false;if(t==false){n=n.replace("[]","");lblName=joms.jQuery("#lbl"+n).html();if(lblName==null){lblName="Field"}else{lblName=lblName.replace("*","")}this.setMessage(n,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE")}}return t};this.validateForm=function(){var e=true;this.errorField=new Array;joms.jQuery("#community-wrap form.community-form-validate :input.required").each(function(t){if(!cvalidate.validateElement(this))e=false});joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-email").each(function(){if(joms.jQuery.trim(joms.jQuery(this).val())!=""){if(!cvalidate.validateElement(this))e=false}});joms.jQuery("#community-wrap form.community-form-validate :input[class*=minmax]").each(function(){if(this.className.indexOf("minmax")>-1){var t=joms.jQuery(this).attr("class").split(" ");for(var n=0;n<t.length;n++){if(t[n].indexOf("minmax")==0){var r=t[n].split("_")[1];var i=t[n].split("_")[2];var s=joms.jQuery.trim(joms.jQuery(this).val()).length;if(!(s>=r&&s<=i)){cvalidate.setMessage(joms.jQuery(this).attr("id"),"","COM_COMMUNITY_REGISTER_INVALID_CHAR_COUNT",r,i);e=false}break}}}});joms.jQuery("#community-wrap form.community-form-validate :input.validate-profile-url").each(function(){if(joms.jQuery.trim(joms.jQuery(this).val())!=""){if(!cvalidate.validateElement(this))e=false}});return e};this.ajaxValidateUserName=function(e){jax.call("community","register,ajaxCheckUserName",joms.jQuery(e).val())};this.ajaxValidateEmail=function(e){jax.call("community","register,ajaxCheckEmail",joms.jQuery(e).val())};this.checkCustomDate=function(el){var isValid=true;var fieldName=el.name;if(joms.jQuery(el).hasClass("validate-custom-date")){fieldId=fieldName.replace("[]","");var dateObj=joms.jQuery("#community-wrap form.community-form-validate input[name='"+fieldName+"']");for(var i=0;i<dateObj.length;i++){if(!/^-?\d+$/.test(dateObj[i].value)){isValid=false}}var dateObj2=joms.jQuery("#community-wrap form.community-form-validate select[name='"+fieldName+"']");var dd=dateObj[0].value;var mm=dateObj2[0].value;var yy=dateObj[1].value;var dayobj=new Date(yy,eval(mm-1),dd);if(dayobj.getMonth()+1!=mm||dayobj.getDate()!=dd||dayobj.getFullYear()!=yy){isValid=false}if(isValid==false){this.setMessage(fieldId,"","COM_COMMUNITY_INVALID_DATE")}else{joms.jQuery("#err"+fieldId+"msg").hide();joms.jQuery("#err"+fieldId+"msg").html("&nbsp")}}return isValid};this.setMessage=function(e,t,n,r,i){errorLabel=joms.jQuery('label[for="'+e+'"]').html().replace("*","");if(joms.jQuery.inArray(errorLabel,this.errorField)==-1){this.errorField.push(errorLabel)}jax.call("community","register,ajaxSetMessage",e,t,n,r,i)};this.setSystemText=function(key,text){eval("cvalidate."+key+' = "'+text+'"')}}var cvalidate=new cValidate;(function(e){var t=new function(){this.countRegexp=function(e,t){var n=e.match(t);return n?n.length:0};this.getStrength=function(e,t){var n=e.length;if(n<t){return 0}var r=this.countRegexp(e,/\d/g),i=this.countRegexp(e,/[a-z]/g),s=this.countRegexp(e,/[A-Z]/g),o=n-r-i-s;if(r==n||i==n||s==n||o==n){return 1}var u=0;if(r){u+=2}if(i){u+=s?4:3}if(s){u+=i?4:3}if(o){u+=5}if(n>10){u+=1}return u};this.getStrengthLevel=function(e,t){var n=this.getStrength(e,t);switch(true){case n<=0:return 1;break;case n>0&&n<=4:return 2;break;case n>4&&n<=8:return 3;break;case n>8&&n<=12:return 4;break;case n>12:return 5;break}return 1}};e.fn.password_strength=function(n){var r=e.extend({container:null,minLength:6,texts:{1:"Too weak",2:"Weak password",3:"Normal strength",4:"Strong password",5:"Very strong password"}},n);return this.each(function(){if(r.container){var n=e(r.container)}else{var n=e("<span/>").attr("class","jsPasswordStrength");e(this).after(n)}e(this).keyup(function(){var i=e(this).val();if(i.length>0){var s=t.getStrengthLevel(i,r.minLength);var o="jsPasswordStrength_"+s;if(!n.hasClass(o)&&s in r.texts){n.text(r.texts[s]).attr("class","jsPasswordStrength "+o)}}else{n.text("").attr("class","jsPasswordStrength")}})})}})(joms.jQuery)